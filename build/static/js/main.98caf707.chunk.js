(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),o=t.n(c),u=(t(20),t(4)),l=t(2),i=function(e){var n=e.searchField,t=e.handleSearch;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},m=function(e){var n=e.handleClick,t=e.handleNameChange,a=e.handleNumberChange,c=e.newName,o=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:c,onChange:t})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.searchField,t=e.persons,a=e.filteredPersons,c=e.removePerson;return r.a.createElement("div",null,""===n?t.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return c(e.id)}},"delete"))})):a.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return c(e.id)}},"delete"))})))},f=t(3),s=t.n(f),h="/api/persons",b=function(){return s.a.get(h).then((function(e){return e.data}))},v=function(e){return s.a.post(h,e).then((function(e){return e.data}))},p=function(e){return s.a.delete("".concat(h,"/").concat(e))},E=function(e,n){return s.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.message,t=e.errorStyle;return null===n?null:r.a.createElement("span",{style:t?{fontSize:35,color:"red",fontStyle:"italics",backgroundColor:"lightgrey"}:{fontSize:35,color:"green",fontStyle:"italics",backgroundColor:"lightgrey"}},n)},w=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),f=Object(l.a)(o,2),s=f[0],h=f[1],w=Object(a.useState)(""),j=Object(l.a)(w,2),O=j[0],S=j[1],k=Object(a.useState)(""),C=Object(l.a)(k,2),y=C[0],N=C[1],P=Object(a.useState)([]),F=Object(l.a)(P,2),T=F[0],x=F[1],I=Object(a.useState)(null),z=Object(l.a)(I,2),D=z[0],J=z[1],L=Object(a.useState)(!1),A=Object(l.a)(L,2),B=A[0],M=A[1];Object(a.useEffect)((function(){b().then((function(e){c(e),x(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(i,{searchField:y,handleSearch:function(e){N(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));return x(n)}}),r.a.createElement("h3",null,"Add new contact"),r.a.createElement(m,{handleClick:function(e){e.preventDefault();var n=t.findIndex((function(e){return e.name===s}));if(n>=0){var a=t[n].id;if(window.confirm("".concat(s," is already in the phone book, replace old number with new one?"))){var r=Object(u.a)(Object(u.a)({},t[n]),{},{number:O});E(a,r).then((function(e){c(t.map((function(n){return n.id===a?e:n}))),J("".concat(t[n].name,"' number was changed!")),h(""),S(""),setTimeout((function(){J(null)}),3e3)})).catch((function(e){M(!0),J(e.response.data.error),setTimeout((function(){J(null),M(!1)}),3e3)}))}}else{var o={name:s,number:O};v(o).then((function(e){c(t.concat(e)),h(""),S(""),J("".concat(o.name," was added to the Phonebook!")),setTimeout((function(){J(null)}),3e3)})).catch((function(e){M(!0),J(e.response.data.error),setTimeout((function(){M(!1),J(null)}),3e3)}))}},handleNameChange:function(e){return h(e.target.value)},handleNumberChange:function(e){return S(e.target.value)},newName:s,newNumber:O}),r.a.createElement(g,{message:D,errorStyle:B}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(d,{searchField:y,persons:t,filteredPersons:T,removePerson:function(e){var n=t.findIndex((function(n){return n.id===e}));window.confirm("Do you really want to delete ".concat(t[n].name,"?"))&&p(e).then((function(){c(t.filter((function(n){return n.id!==e})))}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.98caf707.chunk.js.map